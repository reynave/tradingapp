<app-header></app-header>
<div class="container-fluid body-margin-top">
    <div class="row g-1">

        <div class="col-lg-4 col-12" [hidden]="!leftSide">
            <div class="mt-1">
                <div class="border bg-white rounded ">
                    <div class="text-end">
                        <button type="button" (click)="leftSide=false" class="btn btn-light"><i
                                class="bi bi-arrow-bar-left"></i></button>
                    </div>
                    <div class="mb-4">
                        <canvas id="canvas">{{chart}}</canvas>
                    </div>
                    <div class="p-3">

                        <div class="mb-2">
                            <h4>Summary</h4>
                        </div>
                        <div class="mb-2">
                            Total Trades
                        </div>
                        <a class="m-1 btn" *ngFor="let i of backgroundColorOption" >
                            <i class="bi bi-square-fill fs-4"   [ngStyle]="{'color': i.color }" ></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>


        <div class="col-lg-{{leftSide == false ? 12:8}} col-12">

            <div class="border bg-white rounded p-3 mt-1">
                <div class="row">
                    <div class="col-8">
                        <h4 class="d-inline" placement="top-left" ngbTooltip="Tooltip on top">Title of setup trading </h4>
                    </div>
                    <div class="col-4 text-end">
                        <div class="d-flex flex-row-reverse ">
                            <div>
                                <a href="javascript:;" class="btn btn-outline-dark" placement="top-right"
                                    (click)="openModalFullscreen(contentCustomField)" ngbTooltip="Tooltip on top"><i
                                        class="bi bi-gear"></i></a>
                            </div>

                            <div ngbDropdown container="body" class="mx-1">
                                <button type="button" class="btn btn-outline-dark " ngbDropdownToggle>Share
                                    Link</button>
                                <div ngbDropdownMenu>
                                    <button ngbDropdownItem>Edit</button>
                                    <button ngbDropdownItem>Duplicate</button>
                                    <button ngbDropdownItem>Move</button>
                                    <div class="dropdown-divider"></div>
                                    <button ngbDropdownItem>Delete</button>
                                </div>
                            </div>
                            <div [hidden]="leftSide">
                                <a (click)="leftSide=true"> <i class="bi bi-arrow-bar-right h2"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <div>
                            <label>
                                https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/?share=sha384-9ndCyUaIbzAi
                            </label>
                            <a href="" class="badge bg-info mx-2">Copy Link</a>
                        </div>
                    </div>
                </div>

            </div>

            <div class="border bg-white rounded mt-1">
 
                <div class="text-center my-5" *ngIf="!startUpTable">
                    <img src="./assets/gif/loading-board.gif"  class="w-100" style="max-width: 300px;">
                </div>

                <div class="tables-body" *ngIf="startUpTable">
                    <div class="sticky-top">
                        <div class="d-flex tables-header-td bg-white">
                            <div class="floating-div bg-white">
                                <div class="py-1 px-2">
                                     <i class="bi bi-check-square-fill text-primary"  *ngIf="isCheckBoxAll" (click)="checkBoxAll(false)"></i>  
                                    <i class="bi bi-square" *ngIf="!isCheckBoxAll" (click)="checkBoxAll(true)"></i>
                                </div>
                            </div>
                            <div class=" order-{{n.sorting}} bg-white " *ngFor="let n of customField;  let a = index">
                                <div class="p-1 text-center orders " [ngStyle]="{'width': n.width+'px'}">{{n.name}}</div>
                            </div>
                            <!-- <div class=" order-99 bg-white ">
                                <div class="p-1 text-center orders ">Notes</div>
                            </div> -->

                        </div>
                    </div>

                    <div class="d-flex tables-body-td" *ngFor="let x of detail; let i = index">
                        <div class="floating-div bg-white">
                            <div class="py-1 px-2">
                                <span *ngIf="x.checkbox===true" (click)="x.checkbox=false">
                                    <i class="bi bi-check-square-fill text-primary"></i>
                                </span>
                                <span *ngIf="x.checkbox!=true" (click)="x.checkbox=true">
                                    <i class="bi bi-square"></i>
                                </span>
                            </div>
                        </div>

                        <div class="order-{{n.sorting}}" *ngFor="let n of customField;  let a = index" >
                            <div class="orders" [ngStyle]="{'width': n.width+'px'}"> 
                                <app-custom-field [item]="objItem(n,x,i)"   (newItemEvent)="onChild($event)"></app-custom-field>
                            </div>
                        </div>

                         
                    </div>
                  
                </div>
            </div>

        </div>
    </div>
</div>


<ng-template #canvasRight let-offcanvas>
    <div class="offcanvas-header">
        <div class="offcanvas-title" id="offcanvas-basic-title">Notes</div>
        <button type="button" class="btn-close" aria-label="Close" (click)="offcanvas.dismiss('Cross click')"></button>
    </div>
    <div class="offcanvas-body">

        <div class="mb-3">
           
            <!-- {{detailObject | json}} -->
            <editor apiKey="cc5hqwaiqsocbfakkn5qpug7r9bx5zioxppbw9h6w4gd0286" [init]="{
                height: 500,
                menubar: false, 
                branding: false,
                plugins: [
                'advlist autolink lists link image charmap print preview anchor', 
                'searchreplace visualblocks code fullscreen',
                'insertdatetime media table paste code help wordcount'
                ],
                toolbar:
                'formatselect | bold italic backcolor | \
                alignleft aligncenter alignright alignjustify | \
                bullist numlist outdent indent | removeformat'
            }" [(ngModel)]="detailObject.value" ></editor>
        </div>

        <div class="text-end">
            <button type="button" class="btn btn-outline-dark" (click)="offcanvas.close('Save click')">Save</button>
        </div>
    </div>
</ng-template>


<ng-template #contentCustomField let-modal>
    <div class="modal-header">
        <div class="modal-title">Custom Fields</div>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

        <div class="container sortable">
            <div class="row g-2">
                <div class="col-2 border-bottom">
                    <div class="ms-2">
                        <strong>TYPE OF FIELD</strong>
                    </div>
                </div>
                <div class="col-8 border-bottom">
                    <div class="ms-3">
                        <strong>FIELDS</strong>
                    </div>
                </div>
            </div>

            <div class="row g-2" *ngFor="let x of fields">
                <div class="col-2 border-bottom py-2">
                    <select class="form-control ">
                        <option>Text</option>
                        <option>Number</option>
                        <option>Percent</option>
                        <option>Date</option>
                        <option>Time</option>
                        <option>Date & Time</option>
                        <option>Select Option</option>
                        <option>Notes</option>
                        <option>Galleries</option>
                        <option>Url</option>

                    </select>

                </div>
                <div class="col-8 border-bottom py-2">
                    <div class="d-flex flex-row">
                        <div class="px-2 resizable">
                            <input type="text" value="{{x.name}}" class="form-control">
                        </div>

                        <div class="px-2"><i class="bi bi-lock"></i></div>
                        <div class="px-2 handle" data-id="{{x.id}}"><i class="bi bi-list"></i></div>
                    </div>
                </div>
            </div>
        </div>


    </div>

</ng-template>



<ng-template #contentEditSelect let-modal>
	<div class="modal-header">
		<small class="modal-title" id="modal-basic-title">Profile update</small>
		<button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
	</div>
	<div class="modal-body">
		<code> {{detailObject.select | json}}</code>
        <table class="table">
            <tbody>
                <tr *ngFor="let item of detailObject.select.option">
                    <td>
                        <input type="text" class="form-control" [(ngModel)]="item.value">
                    </td>
                    <td>
                        <div ngbDropdown class="d-inline-block" #myDrop="ngbDropdown">
                            <a  class="btn btn-light"  id="dropdownBasic1" ngbDropdownToggle>
                                <i class="bi bi-square-fill"></i>
                            </a>
                            <div ngbDropdownMenu>
                                <div style="width: 200px;">
                                    <a class="m-1 btn" *ngFor="let i of backgroundColorOption" (click)="myDrop.close()">
                                        <i class="bi bi-square-fill fs-4"   [ngStyle]="{'color': i.color }" ></i>
                                    </a>
                                </div>
                              
                            </div>
                        </div> 
                    </td>
                    <td>
                        <a href="javascript:;"  class="btn btn-light"><i class="bi bi-trash"></i></a>
                    </td>
                    <td>
                        <a href="javascript:;"  class="btn "> <i class="bi bi-list"></i></a>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="text" class="form-control" [(ngModel)]="newSelect.value">
                    </td>
                </tr>
            </tbody>
           
        </table>
        {{newSelect | json}}
	</div>
	<div class="modal-footer">
		<button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Save</button>
	</div>
</ng-template>